{% extends "base.html" %} {% block title %}Admin Dashboard - Meeting Room
Booking System{% endblock %} {% block content %}
<h2>Admin Dashboard</h2>

<hr />

<h3>System Overview</h3>
<ul>
  <li>Total Employees: {{ employees|length }}</li>
  <li>Total Rooms: {{ rooms|length }}</li>
  <li>Total Bookings: {{ bookings|length }}</li>
  <li>Support Tickets: {{ tickets|length }}</li>
</ul>

<hr />

<h3>All Bookings</h3>
{% if bookings %}
<table border="1">
  <thead>
    <tr>
      <th>Booking ID</th>
      <th>Employee</th>
      <th>Room</th>
      <th>Start Time</th>
      <th>End Time</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for booking in bookings %}
    <tr>
      <td>{{ booking.bookingid }}</td>
      <td>{{ booking.employee.fname }} {{ booking.employee.lname }}</td>
      <td>{{ booking.room.roomname }} (Floor {{ booking.room.floor }})</td>
      <td>{{ booking.timebegin }}</td>
      <td>{{ booking.timefinish }}</td>
      <td>
        <form
          method="POST"
          action="{{ url_for('cancel_booking', booking_id=booking.bookingid) }}"
          style="display: inline"
        >
          <button
            type="submit"
            onclick="return confirm('Are you sure you want to cancel this booking?')"
          >
            Cancel
          </button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No bookings in the system.</p>
{% endif %}

<hr />

<h3>All Employees</h3>
{% if employees %}
<table border="1">
  <thead>
    <tr>
      <th>Employee ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>Role</th>
    </tr>
  </thead>
  <tbody>
    {% for employee in employees %}
    <tr>
      <td>{{ employee.employeeid }}</td>
      <td>{{ employee.fname }} {{ employee.lname }}</td>
      <td>{{ employee.email }}</td>
      <td>{{ employee.role }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No employees in the system.</p>
{% endif %}

<hr />

<h3>All Rooms</h3>
{% if rooms %}
<table border="1">
  <thead>
    <tr>
      <th>Room ID</th>
      <th>Room Name</th>
      <th>Floor</th>
      <th>Capacity</th>
    </tr>
  </thead>
  <tbody>
    {% for room in rooms %}
    <tr>
      <td>{{ room.roomid }}</td>
      <td>{{ room.roomname }}</td>
      <td>{{ room.floor }}</td>
      <td>{{ room.capacity }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No rooms in the system.</p>
{% endif %}

<hr />

<h3>Support Tickets</h3>
{% if tickets %}
<table border="1">
  <thead>
    <tr>
      <th>Ticket ID</th>
      <th>Employee</th>
      <th>Subject</th>
      <th>Message</th>
      <th>Created At</th>
    </tr>
  </thead>
  <tbody>
    {% for ticket in tickets %}
    <tr>
      <td>{{ ticket.ticketid }}</td>
      <td>{{ ticket.employee.fname }} {{ ticket.employee.lname }}</td>
      <td>{{ ticket.subject }}</td>
      <td>{{ ticket.message }}</td>
      <td>{{ ticket.created_at }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No support tickets in the system.</p>
{% endif %} {% endblock %}
