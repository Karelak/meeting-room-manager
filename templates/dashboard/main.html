{% extends "base.html" %} {% block title %}Dashboard - Meeting Room Booking
System{% endblock %} {% block content %}
<h2>Welcome, {{ user.fname }} {{ user.lname }}</h2>

<hr />

<h3>Your Recent Bookings</h3>
{% if bookings %}
<table border="1">
  <thead>
    <tr>
      <th>Booking ID</th>
      <th>Room</th>
      <th>Start Time</th>
      <th>End Time</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for booking in bookings %}
    <tr>
      <td>{{ booking.bookingid }}</td>
      <td>{{ booking.room.roomname }} (Floor {{ booking.room.floor }})</td>
      <td>{{ booking.timebegin }}</td>
      <td>{{ booking.timefinish }}</td>
      <td>
        <form
          method="POST"
          action="{{ url_for('cancel_booking', booking_id=booking.bookingid) }}"
          style="display: inline"
        >
          <button
            type="submit"
            onclick="return confirm('Are you sure you want to cancel this booking?')"
          >
            Cancel
          </button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>You have no bookings.</p>
{% endif %}

<hr />

<h3>Unread Notifications</h3>
{% if notifications %}
<table border="1">
  <thead>
    <tr>
      <th>Message</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    {% for notification in notifications %}
    <tr>
      <td>{{ notification.message }}</td>
      <td>{{ notification.created_at }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<p><a href="{{ url_for('notifications') }}">View all notifications</a></p>
{% else %}
<p>No unread notifications.</p>
{% endif %}

<hr />

<h3>Quick Actions</h3>
<ul>
  <li><a href="{{ url_for('new_booking') }}">Create New Booking</a></li>
  <li><a href="{{ url_for('rooms') }}">Browse Rooms</a></li>
  <li><a href="{{ url_for('bookings') }}">View All My Bookings</a></li>
  <li><a href="{{ url_for('support') }}">Submit Support Ticket</a></li>
</ul>
{% endblock %}
